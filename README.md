# 🏭 Система управления рекламациями и качеством продукции

[![Python](https://img.shields.io/badge/Python-3.9%2B-blue)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-2.3-green)](https://flask.palletsprojects.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14-blue)](https://www.postgresql.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

**Веб-система для учёта и анализа возвратов товаров с полноценным ETL-пайплайном и аналитическими дашбордами**

---

## 📋 Оглавление

- [🌟 Особенности](#-особенности)
- [🏗️ Архитектура](#️-архитектура)
- [📊 Функциональность](#-функциональность)
- [🛠️ Технологический стек](#️-технологический-стек)
- [🚀 Быстрый старт](#-быстрый-старт)
- [📁 Структура проекта](#-структура-проекта)
- [🔍 Использование](#-использование)
- [📈 ETL-процессы](#-etl-процессы)
- [📊 Аналитика и отчетность](#-аналитика-и-отчетность)
- [📄 API документация](#-api-документация)

---

## 🌟 Особенности

- **📝 Учёт рекламаций** – интуитивная веб-форма для регистрации возвратов
- **🔄 Автоматические ETL-процессы** – извлечение, преобразование и загрузка данных
- **📊 Интерактивные дашборды** – визуализация аналитики в реальном времени
- **🔍 Анализ качества** – выявление проблемных товаров и причин брака
- **⚡ REST API** – интеграция с внешними системами
---

## 🏗️ Архитектура

```
┌─────────────────────────────────────────────────────────────┐
│                     Веб-интерфейс (Frontend)                │
│                    HTML/CSS/JS                              │
└───────────────────────────┬─────────────────────────────────┘
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                     REST API (Flask Backend)                │
│              Обработка запросов + бизнес-логика             │
└───────────────────────────┬─────────────────────────────────┘
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                    ETL-Пайплайн (Python)                    │
│          Extract → Transform → Load + Агрегация             │
└───────────────────────────┬─────────────────────────────────┘
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                 Хранилище данных (PostgreSQL)               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 📊 Функциональность

### ✅ Основные возможности
- **Регистрация рекламаций** – добавление данных о возвратах через веб-форму
- **Классификация причин** – стандартизированный справочник причин возврата
- **Автоматическая нумерация** – уникальные номера для каждой рекламации

### 🔄 ETL-процессы
- **Многоисточниковое извлечение** – веб-форма, CSV, API, генерация данных
- **Интеллектуальное преобразование** – очистка, стандартизация, обогащение
- **Оптимизированная загрузка** – пакетная обработка, транзакционность

### 📈 Аналитика
- **Интерактивные дашборды** – динамические графики и диаграммы
- **Топ проблем** – самые частые причины возвратов
- **Продуктовая аналитика** – оценка качества по товарным категориям

---

## 🛠️ Технологический стек

### Backend
- **Python 3.9+** – основной язык программирования
- **Flask 2.3** – веб-фреймворк для REST API
- **SQLAlchemy 3.0** – ORM для работы с БД
- **Pandas 2.0+** – обработка и анализ данных
- **Plotly** – генерация графиков для аналитики

### База данных
- **PostgreSQL 14+** – основная СУБД
- **Схема "звезда"** – для аналитических запросов
- **Индексы и оптимизация** – для высокой производительности

### Frontend
- **HTML5/CSS3** – структура и стилизация
- **JavaScript (ES6+)** – интерактивность
- **Plotly.js** – интерактивная визуализация

### Инфраструктура
- **REST API** – архитектура взаимодействия
- **JSON/CSV** – форматы обмена данными
- **Git** – контроль версий

---

## 🚀 Быстрый старт

### Предварительные требования
- Python 3.9 или новее
- PostgreSQL 14 или новее
- pip (менеджер пакетов Python)

### Установка за 5 минут
```bash
# 1. Клонируйте репозиторий
git clone https://github.com/yourusername/complaints-system.git
cd complaints-system

# 2. Установите зависимости
pip install -r requirements.txt

# 3. Настройте базу данных
createdb complaints_db

# 4. Запустите приложение
python app.py

# 5. Откройте в браузере
# http://localhost:8080
```

---

## 📁 Структура проекта

```
complaints_system/
│
├── app.py              # Основное Flask приложение
├── database.py         # Модели БД и функции работы с данными
├── etl.py              # ETL-процессы (извлечение, преобразование, загрузка)
├── requirements.txt    # Зависимости Python
├── sample_data.csv     # Пример тестовых данных
│
├── static/             # Статические файлы
│   └── style.css      # CSS стили
│
├── templates/          # HTML шаблоны
│   ├── index.html     # Главная страница
│   ├── add.html       # Форма добавления рекламации
│   └── dashboard.html # Страница аналитики
│
└── README.md           # Документация (этот файл)
```

---

## 🔍 Использование

### 1. Добавление рекламации
1. Перейдите на страницу "Добавить рекламацию"
2. Выберите товар из выпадающего списка
3. Укажите причину возврата
4. Введите данные клиента и описание проблемы
5. Нажмите "Отправить рекламацию"

### 2. Просмотр статистики
- **Главная страница** – основные KPI и последние рекламации
- **Дашборд аналитики** – интерактивные графики и диаграммы
- **Автоматическое обновление** – данные обновляются в реальном времени

### 3. Запуск ETL-процессов
- На главной странице нажмите "Запустить ETL"
- Или используйте API эндпоинт: `POST /run_etl`
- Процесс выполняется в фоновом режиме

---

## 📈 ETL-процессы

### Извлечение (Extract)
```python
# Источники данных:
# 1. Веб-форма (реальный ввод)
# 2. CSV файлы (исторические данные)
# 3. API интеграции (внешние системы)
# 4. Генератор тестовых данных
```

### Преобразование (Transform)
- **Очистка**: удаление дубликатов, обработка пропусков
- **Стандартизация**: унификация форматов и значений
- **Обогащение**: добавление метаданных и вычисляемых полей
- **Агрегация**: группировка для аналитических отчетов

### Загрузка (Load)
```python
# 1. Загрузка в операционную БД (OLTP)
# 2. Трансформация в схему "звезда" (OLAP)
# 3. Обновление агрегатных таблиц
# 4. Индексация для быстрого доступа
```

---

## 📊 Аналитика и отчетность

### Доступные дашборды
1. **Топ причин возвратов** – столбчатая диаграмма
2. **Динамика по месяцам** – линейный график трендов
3. **Распределение по продуктам** – гистограмма
4. **Географический анализ** – карта проблем по регионам

### Ключевые метрики (KPI)
- **Общее количество рекламаций**
- **Новые рекламации сегодня**
- **Среднее время обработки**
- **Наиболее проблемный товар**
- **Самая частая причина возвратов**

---

## 📄 API документация

### Основные эндпоинты

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| `GET` | `/api/complaints` | Получить список рекламаций |
| `POST` | `/add` | Добавить новую рекламацию |
| `GET` | `/api/charts/top_reasons` | Данные для графика топ причин |
| `GET` | `/api/charts/monthly_trend` | Динамика по месяцам |
| `POST` | `/run_etl` | Запуск ETL процесса |
| `GET` | `/api/stats` | Статистика в формате JSON |

### Пример запроса
```bash
# Получить список рекламаций
curl -X GET http://localhost:8080/api/complaints

# Запустить ETL процесс
curl -X POST http://localhost:8080/run_etl
```

---

*Этот проект разработан как практическая часть курсовой работы по теме "Реализация хранилища данных для системы управления качеством продукции".*
